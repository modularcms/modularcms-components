(()=>{const e={name:"cms_rollout",version:[1,0,0],ccm:"https://ccmjs.github.io/ccm/versions/ccm-25.5.3.min.js",config:{html:["ccm.load","https://modularcms.github.io/modularcms-components/cms_rollout/resources/html/templates.html"],css:["ccm.load","https://modularcms.github.io/modularcms-components/cms_rollout/resources/css/style.css"],helper:["ccm.load","https://ccmjs.github.io/akless-components/modules/versions/helper-5.1.0.mjs"],routing:["ccm.instance","https://modularcms.github.io/modularcms-components/routing/versions/ccm.routing-1.0.0.js"],routing_sensor:["ccm.instance","https://modularcms.github.io/modularcms-components/routing_sensor/versions/ccm.routing_sensor-1.0.0.js"],data_controller:["ccm.instance","https://modularcms.github.io/modularcms-components/data_controller/versions/ccm.data_controller-1.0.0.min.js"],page_renderer:["ccm.component","https://modularcms.github.io/modularcms-components/page_renderer/versions/ccm.page_renderer-1.0.0.js"]},Instance:function(){let e;this.ready=(async()=>{e=Object.assign({},this.ccm.helper,this.helper)});let t=null,s=null;this.start=(async()=>{const n=await this.data_controller.getWebsiteFromDomain(window.location.hostname);let o=document.createElement("base");o.setAttribute("href",n.baseUrl),document.head.appendChild(o),null!=n?(await this.routing.navigateRoot(window.location.pathname),this.routing.registerRoutingCallback(async o=>{if(0==o.url.indexOf(n.baseUrl)){const c=o.url.substring(n.baseUrl.length-1),i=await this.data_controller.getPageByUrl(n.websiteKey,c,!0);if(null!=i){if(t!=c){t=c,this.setTitle(i.title),this.setMeta("description",i.meta.description),this.setMeta("keywords",i.meta.keywords),this.setMeta("robots",i.meta.robots?"index, follow":"noindex, nofollow");const o={parent:this,websiteKey:n.websiteKey,page:i};null==s?(e.setContent(this.element,e.html(this.html.main,{})),s=await this.page_renderer.start(Object.assign(o,{root:this.element.querySelector("#page-renderer-container")}))):(Object.assign(s,o),s.updateChildren())}}else this.render404()}else this.render404()},"cms_rollout")):alert("This site was not registered for modularcms.")}),this.render404=(()=>{t=null,this.setTitle("Page not found."),this.setMeta("description",""),this.setMeta("keywords",""),this.setMeta("robots","noindex, nofollow"),e.setContent(this.element,e.html(this.html.main,{})),e.setContent(this.element.querySelector("#page-renderer-container"),e.html(this.html.error404,{}))}),this.setTitle=(e=>{let t=document.head.querySelector("title");null==t&&(t=document.createElement("title"),document.head.appendChild(t)),t.innerText=e}),this.setMeta=((e,t)=>{let s=document.head.querySelector('meta[name="'+e+'"]');null==s&&(s=document.createElement("meta"),document.head.appendChild(s)),s.setAttribute("name",e),s.setAttribute("content",t)})}};let t="ccm."+e.name+(e.version?"-"+e.version.join("."):"")+".js";if(window.ccm&&null===window.ccm.files[t])return window.ccm.files[t]=e;(t=window.ccm&&window.ccm.components[e.name])&&t.ccm&&(e.ccm=t.ccm),"string"==typeof e.ccm&&(e.ccm={url:e.ccm});let s=(e.ccm.url.match(/(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)/)||["latest"])[0];if(window.ccm&&window.ccm[s])window.ccm[s].component(e);else{var n=document.createElement("script");document.head.appendChild(n),e.ccm.integrity&&n.setAttribute("integrity",e.ccm.integrity),e.ccm.crossorigin&&n.setAttribute("crossorigin",e.ccm.crossorigin),n.onload=function(){window.ccm[s].component(e),document.head.removeChild(n)},n.src=e.ccm.url}})();