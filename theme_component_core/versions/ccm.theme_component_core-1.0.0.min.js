(()=>{const e={name:"theme_component_core",version:[1,0,0],ccm:"https://ccmjs.github.io/ccm/versions/ccm-25.5.3.min.js",config:{html:["ccm.load","https://modularcms.github.io/modularcms-components/theme_component_core/resources/html/template.html"],hash:["ccm.load","https://ccmjs.github.io/akless-components/modules/md5.mjs"],helper:["ccm.load","https://ccmjs.github.io/akless-components/modules/versions/helper-5.1.0.mjs"],data_controller:["ccm.instance","https://modularcms.github.io/modularcms-components/data_controller/versions/ccm.data_controller-1.0.0.min.js"]},Instance:function(){let e;this.ready=(async()=>{e=Object.assign({},this.ccm.helper,this.helper)}),this.start=(async()=>{});let t={},n={},i={};this.initContent=(async(t=this.parent.html.main,n={},i={})=>{const o=this.parent.element,a=this.parent.zoneItem,s=this.parent.edit,r=this.parent.parentZoneName;e.setContent(o,e.html(t,n)),e.append(o,e.html(this.html.style,{})),s&&e.append(o,e.html(this.html.editStyle,{}));for(let t in i)e.setContent(o.querySelector("#"+t),i[t]);this.updateContent(),s&&"themeDefinition"==a.type&&["block","contentComponent"].indexOf(a.data.themeDefinitionType)>=0&&this.addEditFocusHandling(o,r)}),this.updateContent=(async()=>{const o=this.parent.element,a=this.parent.zoneItem,s=this.parent.contentZones||{},r=this.parent.edit;for(let t in s){const d=s[t],l=o.querySelector('.content-zone[data-content-zone-name="'+t+'"]');if(void 0===i[t]&&(n[t]=[],i[t]=[]),l){let n=0;r&&l.addEventListener("drop",e=>e.preventDefault());let o=[];for(let e of d){let a=null;"themeDefinition"==e.type?a=await this.getThemeDefinitionElement(t,e,n):"ccmComponent"==e.type?a=await this.getCcmComponentElement(t,e,n):this.checkIfZoneComponentAtIndexIsEqual(t,e,n)?a=i[t][n]:"header"==e.type?a=this.getHeaderElement(t,e):"paragraph"==e.type?a=this.getParagraphElement(t,e):"list"==e.type?a=this.getListElement(t,e):"image"==e.type&&(a=this.getImageElement(t,e)),i[t][n]=a,null!=a&&o.push(a),n++}l.innerHTML="";for(let n of o)e.append(l,n),r&&n.parentNode.insertBefore(this.getAddContentBlockTypeElement(n),n.nextSibling,t);if(r&&"themeDefinition"==a.type&&"layout"==a.data.themeDefinitionType){const n=e.html(this.html.addBlock,{});e.append(l,n),r&&n.addEventListener("click",()=>{this.addItem(t)})}}}t=s}),this.addEditFocusHandling=((t,n)=>{this.parent.parent.element.addEventListener("click",e=>{e.target!=this.parent.root&&t&&t.classList.remove("edit-focus")}),t.addEventListener("click",()=>{t.classList.add("edit-focus")});let i=e.html(this.html.editThemeDefinition,{});e.append(t,i),i.querySelector('img[data-action="remove"').addEventListener("click",()=>{if(confirm("Do you really want to remove this block?")){const e=new CustomEvent("pageRendererRemoveBlock",{detail:{}});window.dispatchEvent(e),this.parent.parent.core.removeZoneItem(t,n)}});const o=i.querySelector('img[data-action="config"');let a=this.parent;o.addEventListener("click",()=>{const e=new CustomEvent("pageRendererEditBlockConfig",{detail:{zoneItem:this.parent.zoneItem,updateConfig:async e=>{a=await(async e=>{return(await a.parent.core.updateThemeDefinitionElementConfig(a.parent.element.querySelector('.content-zone[data-content-zone-name="'+n+'"]'),a.root,a.zoneItem,n,a,e)).ccmInstance})(e)}}});window.dispatchEvent(e)})}),this.checkIfZoneComponentAtIndexIsEqual=((n,i,o)=>{if(void 0!==t[n]&&void 0!==t[n][o]){let i=t=>{console.log(t);let n=e.clone(t);return delete n.contentZones,delete n.data.config,n},a=e=>{const t=JSON.stringify(e);return this.hash.md5(t)};const s=i(t[n][o]),r=i(r);return a(s)==a(r)}return!1}),this.addItem=(e=>{const t=new CustomEvent("pageRendererAddBlock",{detail:{addFunction:t=>{this.createBlock(this.parent.element.querySelector('.content-zone[data-content-zone-name="'+e+'"]'),e,t)}}});window.dispatchEvent(t)}),this.placeCaretAtEnd=(e=>{if(e.focus(),void 0!==window.getSelection&&void 0!==document.createRange){var t=document.createRange();t.selectNodeContents(e),t.collapse(!1);var n=window.getSelection();n.removeAllRanges(),n.addRange(t)}else if(void 0!==document.body.createTextRange){var i=document.body.createTextRange();i.moveToElementText(e),i.collapse(!1),i.select()}}),this.addContentPasteHandling=((e,t,n=!0)=>{e.addEventListener("paste",i=>{i.preventDefault();let o=(i.originalEvent||i).clipboardData.getData("text/plain").split("\n");n&&document.execCommand("insertText",!1,o[0]);let a=null;if(n&&o.length>1){const t=this.parent.element.parentNode.getSelection(),n=this.splitNode(t,e).next.extractContents();(a=document.createElement("div")).appendChild(n)}let s=e;for(let i=n?1:0;i<o.length-1;i++)s=this.addParagraphAfter(e.parentNode,s,t,o[i].replace(/  /g,"&nbsp; "));a&&(s.innerHTML+=a.innerHTML)})}),this.getContentZoneComponentInstance=(async e=>{const t=this.parent.page;if(void 0===window.modularcms._themeDefinitionComponents&&(window.modularcms._themeDefinitionComponents={}),void 0===window.modularcms._themeDefinitionComponents[t.themeKey]&&(window.modularcms._themeDefinitionComponents[t.themeKey]={}),void 0===window.modularcms._themeDefinitionComponents[t.themeKey][e]){const n=await this.getThemeDefinition(e);window.modularcms._themeDefinitionComponents[t.themeKey][e]=await this.ccm.component(n.ccmComponent.url,n.ccmComponent.config)}return window.modularcms._themeDefinitionComponents[t.themeKey][e]}),this.getThemeDefinition=(async e=>{const t=this.parent.page,n=this.parent.websiteKey;if(void 0===window.modularcms&&(window.modularcms={}),void 0===window.modularcms._themeDefinitions&&(window.modularcms._themeDefinitions={}),void 0===window.modularcms._themeDefinitions[t.themeKey]&&(window.modularcms._themeDefinitions[t.themeKey]={}),0==Object.keys(window.modularcms._themeDefinitions[t.themeKey]).length){let e=await this.data_controller.getAllThemeDefinitionsOfTheme(n,t.themeKey);for(let n of e)window.modularcms._themeDefinitions[t.themeKey][n.themeDefinitionKey]=n}return void 0===window.modularcms._themeDefinitions[t.themeKey][e]&&(window.modularcms._themeDefinitions[t.themeKey][e]=await this.data_controller.getThemeDefinition(n,t.themeKey,e)),window.modularcms._themeDefinitions[t.themeKey][e]}),this.getThemeDefinitionInstance=(async e=>{const t=this.parent.page;if(void 0===window.modularcms._themeDefinitionComponents&&(window.modularcms._themeDefinitionComponents={}),void 0===window.modularcms._themeDefinitionComponents[t.themeKey]&&(window.modularcms._themeDefinitionComponents[t.themeKey]={}),void 0===window.modularcms._themeDefinitionComponents[t.themeKey][e]){const n=await this.getThemeDefinition(e);window.modularcms._themeDefinitionComponents[t.themeKey][e]=await this.ccm.component(n.ccmComponent.url,n.ccmComponent.config)}return window.modularcms._themeDefinitionComponents[t.themeKey][e]}),this.getNewThemeDefinitionElement=(async(e,t)=>{this.parent.websiteKey,this.parent.page;const n=await this.getThemeDefinition(t);return await this.getThemeDefinitionElement(e,{type:"themeDefinition",data:{themeDefinitionKey:t,themeDefinitionType:n.type},config:{}})}),this.getThemeDefinitionElement=(async(t,n)=>{const i=this.parent.websiteKey,o=this.parent.page,a=this.parent.edit,s=await this.getThemeDefinition(n.data.themeDefinitionKey);if(s){let r={};Object.assign(r,n.data.config,{parent:this.parent,zoneItem:n,contentZones:n.contentZones,websiteKey:i,page:o,edit:a,parentZoneName:t});const d=await this.getThemeDefinitionInstance(n.data.themeDefinitionKey),l=await d.start(r);let c=document.createElement("div");return c.contentZoneItem=n,c.ccmInstance=l,c.themeDefinitionType=s.type,e.append(c,l.root),a&&"contentComponent"==n.data.themeDefinitionType&&(c.contentEditable="true",l.root.contentEditable="false",l.element.style.pointerEvents="none !important",l.root.classList.add("content-component"),c.addEventListener("click",()=>{c.focus()}),c.addEventListener("keydown",e=>{if("Backspace"==e.key){const n=this.parent.element.parentNode.getSelection().getRangeAt(0);e.preventDefault(),n.collapsed&&(0==n.startOffset?c.previousSibling.previousSibling&&""==c.previousSibling.previousSibling.innerHTML&&this.removeZoneItem(c.previousSibling.previousSibling,t):(c.previousSibling&&c.previousSibling.previousSibling?this.placeCaretAtEnd(c.previousSibling.previousSibling):this.addParagraphAfter(c.parentNode,c,t),this.removeZoneItem(c,t)))}}),c.addEventListener("keypress",n=>{if("Enter"===n.key){const i=this.parent.element.parentNode.getSelection().getRangeAt(0);n.preventDefault(),e.remove(c.querySelector("div:last-child:not(.content-component)")),i.collapsed&&(0==i.startOffset?this.addParagraphBefore(c.parentNode,c,t):this.addParagraphAfter(c.parentNode,c,t))}})),c.getDataContent=(()=>({themeDefinitionKey:s.themeDefinitionKey,themeDefinitionType:s.type,config:n.data.config})),c.setAttribute("data-type",n.type),c}return null}),this.getCcmComponentElement=(async(e,t,i)=>{const o=this.parent.websiteKey,a=this.parent.page,s=this.parent.edit;let r={};if(Object.assign(r,t.data.config,{parent:this.parent,contentZones:t.contentZones,websiteKey:o,page:a,edit:s}),this.checkIfZoneComponentAtIndexIsEqual(e,t,i))Object.assign(n[e][i],r),n[e][i].update();else{const o=await this.ccm.start(t.data.ccmComponent.url,t.data.ccmComponent.config);n[e][i]=o}let d=n[e][i].root;return d.contentZoneItem=t,d.setAttribute("data-type",t.type),d}),this.getHeaderElement=((e,t={type:"header",data:{text:"",level:2},contentZones:{}})=>{const n=this.parent.edit;let i=document.createElement("h"+t.data.level);return i.innerHTML=t.data.text,i.contentZoneItem=t,i.setAttribute("data-header-level",t.data.level),n&&(i.contentEditable="true",this.addContentEditing(i,e)),i.getDataContent=(()=>({text:i.innerHTML,level:i.tagName.substring(1)})),i.setAttribute("data-type",t.type),this.addContentPasteHandling(i,e),i}),this.getParagraphElement=((e,t={type:"paragraph",data:{text:""},contentZones:{}})=>{const n=this.parent.edit;let i=document.createElement("p");return i.contentZoneItem=t,i.innerHTML=t.data.text,n&&(i.contentEditable="true",this.addContentEditing(i,e)),i.getDataContent=(()=>({text:i.innerHTML})),this.addContentPasteHandling(i,e),i.setAttribute("data-type",t.type),i}),this.addHeaderAfter=((e,t,n,i=2,o="")=>{let a=this.getHeaderElement(n,{contentZones:{},type:"header",data:{level:i,text:o}});this.addContentZoneItemAfter(e,t,a,n),a.focus()}),this.addParagraphAfter=((e,t,n,i="")=>{let o=this.getParagraphElement(n,{contentZones:{},type:"paragraph",data:{text:i}});return this.addContentZoneItemAfter(e,t,o,n),o.focus(),""!=i&&o.classList.add("has-content"),o}),this.addParagraphBefore=((e,t,n,i="")=>{let o=this.getParagraphElement(n,{contentZones:{},type:"paragraph",data:{text:i}});this.addContentZoneItemBefore(e,t,o,n),o.focus()}),this.addThemeDefinitionAfter=(async(e,t,n,i)=>{let o=await this.getNewThemeDefinitionElement(n,i);return this.addContentZoneItemAfter(e,t,o,n,o.ccmInstance),"block"==o.themeDefinitionType&&o.ccmInstance.element.querySelectorAll(".content-zone").forEach(e=>{o.ccmInstance.core.addParagraphAfter(e,null,e.getAttribute("data-content-zone-name"))}),o.focus(),o}),this.createBlock=(async(e,t,n)=>{let i=this.parent.element.querySelector('.content-zone[data-content-zone-name="'+t+'"] .add-block');(await this.addThemeDefinitionAfter(e,null,t,n)).ccmInstance.element.classList.add("edit-focus"),e.insertBefore(i,null)}),this.addContentZoneItemAfter=((e,t,o,a,s=null)=>{void 0===i[a]&&(i[a]=[],n[a]=[]);let r=null==t?-1:i[a].indexOf(t);r>=0?(i[a].splice(r+1,0,o),n[a].splice(r+1,0,s)):(i[a].push(o),n[a].push(s)),e.insertBefore(o,null==t?null:t.nextSibling?t.nextSibling.nextSibling:null),e.insertBefore(this.getAddContentBlockTypeElement(o,a),o.nextSibling)}),this.addContentZoneItemBefore=((e,t,o,a,s=null)=>{void 0===i[a]&&(i[a]=[],n[a]=[]);let r=null==t?-1:i[a].indexOf(t);r>=0?(i[a].splice(r,0,o),n[a].splice(r,0,s)):(i[a].splice(0,0,o),n[a].splice(0,0,s)),e.insertBefore(o,null==t?null:t),e.insertBefore(this.getAddContentBlockTypeElement(o,a),o.nextSibling)}),this.removeZoneItem=((t,o)=>{let a=i[o].indexOf(t);a>=0?(i[o].splice(a,1),n[o].splice(a,1)):console.warn("Check zone management implementation!"),e.remove(t.nextSibling),e.remove(t)}),this.addContentEditing=((t,n)=>{""==t.innerHTML?t.classList.remove("has-content"):t.classList.add("has-content"),t.addEventListener("keypress",i=>{const o=this.parent.element.parentNode.getSelection().getRangeAt(0);if("Enter"===i.key&&o.collapsed)if(i.preventDefault(),e.remove(t.querySelector("div:last-child:not(.define-content-block-type)")),""!=t.innerHTML){const e=this.parent.element.parentNode.getSelection(),i=this.splitNode(e,t).next.extractContents(),o=document.createElement("div");o.appendChild(i),this.addParagraphAfter(t.parentNode,t,n,o.innerHTML)}else this.addParagraphAfter(t.parentNode,t,n)}),t.addEventListener("keyup",e=>{""==t.innerHTML?t.classList.remove("has-content"):t.classList.add("has-content")}),t.addEventListener("keydown",e=>{const i=this.parent.element.parentNode.getSelection().getRangeAt(0);if("Backspace"===e.key&&(i.collapsed&&0==i.startOffset||!i.collapsed&&0==i.start&&i.endOffset==i.text.length))if(t.previousSibling&&t.previousSibling.previousSibling){if(e.preventDefault(),"themeDefinition"!=t.previousSibling.previousSibling.getAttribute("data-type")&&"ccmComponent"!=t.previousSibling.previousSibling.getAttribute("data-type")){for(this.placeCaretAtEnd(t.previousSibling.previousSibling);t.childNodes.length>0;)t.previousSibling.previousSibling.appendChild(t.childNodes[0]);this.removeZoneItem(t,n)}}else""==t.innerHTML&&(this.addParagraphAfter(t.parentNode,t,n),this.removeZoneItem(t.parentNode,t,n))}),this.addContentEditingFormat(t,n)}),this.splitNode=((e,t)=>{let n=e.getRangeAt(0),{firstChild:i,lastChild:o}=t,a=document.createRange();a.setStart(i,0),a.setEnd(n.startContainer,n.startOffset);let s=document.createRange();return s.setStart(n.endContainer,n.endOffset),s.setEnd(o,o.length),{previous:a,current:n,next:s}}),this.addContentEditingFormat=((t,n)=>{let i=()=>{t.removeEventListener("mouseup",i);const o=this.parent.element.parentNode.getSelection(),a=o.getRangeAt(0),s=a.getBoundingClientRect();let r=e=>null==e?0:1==e.nodeType?e.offsetTop+r(e.offsetParent)-e.scrollTop:r(e.offsetParent),d=e=>null==e?0:1==e.nodeType?e.offsetLeft+d(e.offsetParent)-e.scrollLeft:d(e.offsetParent);if(!a.collapsed||a.collapsed&&"header"==t.contentZoneItem.type){let l=e.html(this.html.editInlineTool,{}),c=s.left-d(this.parent.element)+s.width/2;c<0&&(c=0),l.style.left=c+"px",l.style.top=s.top-r(this.parent.element)+"px",e.append(this.parent.element,l),c<l.getBoundingClientRect().width/2&&(l.style.transform="translate(0, calc(-100% - 4px))",l.style.left="0"),["bold","italic","underline","strikeThrough","removeFormat","header"].forEach(e=>{l.querySelectorAll('img[data-action="'+e+'"]').forEach(i=>{(a.collapsed&&i.getAttribute("data-only-with-range")||i.getAttribute("data-type")&&i.getAttribute("data-type")!=t.contentZoneItem.type||i.getAttribute("data-type-not")&&i.getAttribute("data-type-not")==t.contentZoneItem.type)&&(i.style.display="none"),i.addEventListener("mouseup",()=>{"header"==e?(this.addHeaderAfter(t.parentNode,t,n,parseInt(i.getAttribute("data-header-level")),t.innerHTML),this.removeZoneItem(t,n),m()):(o.addRange(a),document.execCommand(e))})})});let m=()=>{e.remove(l)},p=()=>{window.removeEventListener("mousedown",p);let e=()=>{window.removeEventListener("mouseup",e),m(),1==this.parent.element.parentNode.getSelection().rangeCount&&a.collapsed&&"header"!=t.contentZoneItem.type&&i()};window.addEventListener("mouseup",e)};window.addEventListener("mousedown",p);let h=()=>{window.removeEventListener("selectstart",h),m()};window.addEventListener("selectstart",h);let u=()=>{window.removeEventListener("keydown",u),m()};window.addEventListener("keydown",u)}};t.addEventListener("selectstart",()=>{t.addEventListener("mouseup",i)})}),this.getAddContentBlockTypeElement=((t,n)=>{const i=e.html(this.html.defineBlockType,{});let o=!1;t.addEventListener("focus",()=>{o=!0,t.classList.add("focus")});let a=!1;i.addEventListener("mousedown",()=>{a=!0}),i.addEventListener("mouseup",()=>{a=!1}),i.addEventListener("click",()=>{t.focus()}),t.addEventListener("focusout",()=>{o=!1,a||setTimeout(()=>t.classList.remove("focus"),100)});let s=e=>{let i=t.parentNode;this.addContentZoneItemAfter(i,t,e,n),this.removeZoneItem(t,n)};return i.querySelector('img[data-type="header"]').addEventListener("click",()=>{let e=this.getHeaderElement(n);s(e),e.focus()}),i.querySelector('img[data-type="list"]').addEventListener("click",()=>{let e=this.getListElement(n);s(e),e.focus()}),i.querySelector('img[data-type="image"]').addEventListener("click",()=>{cloudinary.createUploadWidget({cloudName:"dyhjqgkca",uploadPreset:"y6tm2ylf",sources:["local"],googleApiKey:"AIrFcR8hKiRo",multiple:!1,resourceType:"image",palette:{windowBorder:"#000000"}},(e,t)=>{if(!e&&t&&"success"===t.event){const e=t.info;let i=this.getNewImageElement(n,e.secure_url);s(i),this.placeCaretAtEnd(i)}}).open()}),i.querySelector('img[data-type="component"]').addEventListener("click",()=>{const e=new CustomEvent("pageRendererAddComponent",{detail:{addThemeDefinition:async e=>{s(await this.getNewThemeDefinitionElement(n,e))}}});window.dispatchEvent(e)}),i}),this.getListElement=((t,n={type:"list",data:{style:"unordered",items:[""]},contentZones:{}})=>{const i=this.parent.edit;let o=document.createElement("ordered"==n.data.style?"ol":"ul");i&&(o.contentEditable="true",o.addEventListener("keypress",n=>{if("Enter"===n.key){let i=this.parent.element.parentNode.getSelection().getRangeAt(0).startContainer;3==i.nodeType&&(i=i.parentNode),o.querySelector("li:last-child")==i&&""==i.innerHTML&&(n.preventDefault(),e.remove(i),this.addParagraphAfter(o.parentNode,o,t),0==o.childElementCount&&this.removeZoneItem(o,t))}}),o.addEventListener("change",t=>{let n=this.parent.element.parentNode.getSelection().getRangeAt(0).startContainer;3==n.nodeType&&(n=n.parentNode),n.querySelectorAll("br").forEach(t=>e.remove(t))}),o.addEventListener("keyup",n=>{let i=this.parent.element.parentNode.getSelection().getRangeAt(0).startContainer;3==i.nodeType&&(i=i.parentNode),i.querySelectorAll("br").forEach(t=>e.remove(t)),"Backspace"!==n.key||""!=i.innerHTML&&""!=i.innerHTML||0==o.childElementCount&&(o.previousSibling&&o.previousSibling.previousSibling?this.placeCaretAtEnd(o.previousSibling.previousSibling):this.addParagraphAfter(o.parentNode,o,t),this.removeZoneItem(o,t))})),o.setAttribute("data-list-style",n.data.style);for(let e of n.data.items){let t=e=>{let t=document.createElement("li");return t.innerHTML=e,t};o.appendChild(t(e))}return o.setAttribute("data-type",n.type),o.contentZoneItem=n,i&&this.addContentEditingFormat(o,t),o.getDataContent=(()=>{o.querySelectorAll("br").forEach(t=>e.remove(t));let t=[];return o.querySelectorAll("li").forEach(e=>t.push(e.innerHTML)),{style:"ol"==o.tagName?"ordered":"unordered",items:t}}),this.addContentPasteHandling(o,t),o}),this.getNewImageElement=((e,t)=>this.getImageElement(e,{type:"image",data:{file:{url:t},caption:null},contentZones:{}})),this.getImageElement=((t,n={type:"image",data:{file:{url:null},caption:null},contentZones:{}})=>{const i=this.parent.edit;let o=document.createElement("div");o.classList.add("image-wrapper"),i&&(o.contentEditable="true"),o.addEventListener("keydown",e=>{if("Backspace"==e.key){const n=this.parent.element.parentNode.getSelection().getRangeAt(0);e.preventDefault(),n.collapsed&&(0==n.startOffset?o.previousSibling.previousSibling&&""==o.previousSibling.previousSibling.innerHTML&&this.removeZoneItem(o.previousSibling.previousSibling,t):(o.previousSibling&&o.previousSibling.previousSibling?this.placeCaretAtEnd(o.previousSibling.previousSibling):this.addParagraphAfter(o.parentNode,o,t),this.removeZoneItem(o,t)))}}),o.addEventListener("keypress",n=>{if("Enter"===n.key){const i=this.parent.element.parentNode.getSelection().getRangeAt(0);n.preventDefault(),e.remove(o.querySelector("div:last-child:not(.define-content-block-type)")),i.collapsed&&(0==i.startOffset?this.addParagraphBefore(o.parentNode,o,t):this.addParagraphAfter(o.parentNode,o,t))}});let a=document.createElement("img"),s=null;return a.src=n.data.file.url,a.loading="lazy",n.data.caption&&((s=document.createElement("div")).classList.add("image-caption"),s.innerHTML=n.data.caption),i&&a.addEventListener("click",()=>{this.placeCaretAtEnd(o)}),o.appendChild(a),s&&o.appendChild(s),o.getDataContent=(()=>({file:{url:a.src},caption:s?s.innerHTML:null})),this.addContentPasteHandling(o,t,!1),o.setAttribute("data-type",n.type),o.contentZoneItem=n,o}),this.updateThemeDefinitionElementConfig=(async(e,t,n,i,o,a)=>{n.data.config=a,n.contentZones=o.core.getContentZones();let s=await this.getThemeDefinitionElement(i,n);return this.addContentZoneItemAfter(e,t,s,i,s.ccmInstance),"block"==s.themeDefinitionType&&s.ccmInstance.element.querySelectorAll(".content-zone").forEach(e=>{let t=e.getAttribute("data-content-zone-name");0===s.ccmInstance.core.getContentZoneElementCount(t)&&s.ccmInstance.core.addParagraphAfter(e,null,t)}),this.removeZoneItem(t,i),s}),this.getContentZoneElementCount=(e=>void 0===i[e]?0:i[e].length),this.getContentZone=(e=>{let t=[];if(void 0!==i[e])for(let n of i[e]){let e=n.getAttribute("data-type"),i={type:e,data:n.getDataContent?n.getDataContent():{},contentZones:{}};"themeDefinition"==e&&n.ccmInstance.core&&n.ccmInstance.core.getContentZones&&(i.contentZones=n.ccmInstance.core.getContentZones()),t.push(i)}return t}),this.getContentZones=(()=>{let e={};for(let t in i)e[t]=this.getContentZone(t);return e})}};let t="ccm."+e.name+(e.version?"-"+e.version.join("."):"")+".js";if(window.ccm&&null===window.ccm.files[t])return window.ccm.files[t]=e;(t=window.ccm&&window.ccm.components[e.name])&&t.ccm&&(e.ccm=t.ccm),"string"==typeof e.ccm&&(e.ccm={url:e.ccm});let n=(e.ccm.url.match(/(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)/)||["latest"])[0];if(window.ccm&&window.ccm[n])window.ccm[n].component(e);else{var i=document.createElement("script");document.head.appendChild(i),e.ccm.integrity&&i.setAttribute("integrity",e.ccm.integrity),e.ccm.crossorigin&&i.setAttribute("crossorigin",e.ccm.crossorigin),i.onload=function(){window.ccm[n].component(e),document.head.removeChild(i)},i.src=e.ccm.url}})();